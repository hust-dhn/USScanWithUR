# 点云识别与机器人路径规划

## 介绍

此项目用于机器人末端轨迹规划。

## 目录结构

项目目录结构如下：


- **piont_cloud/**：点云处理与路径规划
    **pcd_datas/**：主要用于存放一些点云文件，包含.ply/.pcd文件
        **face_m_pc1.ply/**：全局相机拍摄的全局点云.ply文件
        **new_target.pcd/**：全局相机拍摄的全局点云.pcd文件
        **source_90.pcd/**：局部相机拍摄的局部点云.pcd文件
-   **path_matrices.txt/**：一共104个点，均为路径在极基坐标系下的变换矩阵
-   **path_planner.py**：根据点云路径规划，选择两个注射点，分别向上抬升4cm，中间插值100个点组成机器人工具末端运动轨迹，并且强制使工具的y轴（单相机指向规定的人脸中心方向

---
## 路径规划流程

1. **选择点**：

    程序打开一个窗口显示点云，并提示用户选择4个点（按顺序）：

        起点（在点云表面上）

        终点（在点云表面上）

        起点朝向参考点（这个点用于确定起点处的工具朝向，即工具X轴指向这个点）

        终点朝向参考点（同理，用于确定终点处的工具朝向）

    选择方法：按住Shift键的同时用鼠标左键点击点云上的点，每选择一个点，点会变成绿色。选完4个点后，按Q键退出选择。

2. **生成轨迹并预览**：
    程序根据选择的点生成一条轨迹，并打开另一个窗口显示轨迹。

    轨迹包括：
    a. 从起点表面上方1cm处（工作高度）开始，然后抬升到4cm处（过渡高度）。
    b. 在4cm高度从起点上方移动到终点上方（中间插值100个点）。
    c. 从终点上方4cm处下降到终点表面上方1cm处。

    在预览窗口中，可以按'T'键显示/隐藏每个轨迹点的坐标系（表示位姿）。

    按'S'键将轨迹的位姿矩阵保存到文件（point_cloud/path_matrices.txt），每行是一个4x4变换矩阵的16个数字（按行优先）。

    按Q键退出预览窗口。



